# Задание №1

Вариант 13

Разработать эмулятор для языка оболочки ОС. Необходимо сделать работу
эмулятора как можно более похожей на работу в командной строке UNIX
подобной ОС.

## Эмулятор командной строки (Этап 1: REPL)

### Выполнено

- Минимальный прототип графического эмулятора командной строки, выполненный на Python (Tkinter).
- Реализован REPL-цикл, заглушки команд `ls`, `cd`, обработка ошибок и команда `exit`.

### Демонстрация работы прототипа в интерактивном режиме

![Пример работы эмулятора](screenshots/demo_session_stage_1.png)

## Требования

- Python 3.8+
- Tkinter

---

## Запуск

Перейдите в папку `console` и выполните:

```bash
python gui_repl.py
```

---

## Этап 2: Конфигурация

### Выполнено

- Добавлена поддержка аргументов командной строки:
  - `--vfs-path` — путь к виртуальной файловой системе (VFS).
  - `--script` — путь к стартовому скрипту.
- Реализовано выполнение стартового скрипта:
  - поддержка комментариев (`#`),
  - вывод команд и их результатов в окно эмулятора,
  - обработка ошибок без прерывания работы скрипта.
- Добавлены тестовые скрипты:
  - `tests/test1.txt` — демонстрация корректных команд,
  - `tests/test2.txt` — демонстрация ошибок.
- Созданы `.bat` файлы для запуска тестов на Windows.

### Демонстрация работы

**Пример запуска с тестовым скриптом:**

```bash
python ..\gui_repl.py --vfs-path .\data --script ..\tests\test1.txt
```

![Пример работы эмулятора](screenshots/demo_session_stage_2_1.png)

**Пример работы с ошибками в скрипте:**

```bash
python ..\gui_repl.py --vfs-path .\data --script ..\tests\test2.txt
```

![Пример работы эмулятора](screenshots/demo_session_stage_2_2.png)

---

## Запуск

- Для запуска со скриптом используйте параметры:

```bash
python ..\gui_repl.py --vfs-path .\data --script ..\tests\test1.txt
```

- Также можно использовать готовые `.bat` файлы в папке `scripts\`.

## Этап 3: Виртуальная файловая система (VFS)

### Выполнено

- Реализована поддержка виртуальной файловой системы (VFS) в формате XML:
  - загрузка файловой структуры из XML,
  - сохранение текущего состояния в XML,
  - поддержка файлов и директорий, содержимое файлов хранится в Base64.
- Реализованы команды для работы с VFS:
  - `vfs-save <path>` — сохранение текущей файловой системы в указанный XML-файл.
- Обработаны ошибки:
  - проверка корректности структуры XML при загрузке.

### Тестирование

- Добавлен стартовый скрипт `tests/stage3/startup_test.txt`, который проверяет:

  - базовые команды REPL (`ls`, `cd`, ошибки, `exit`),
  - работу с VFS (загрузка, навигация, сохранение),
  - обработку ошибок (`cd not_exist`, некорректные аргументы и т.д.).

- Для запуска используется `.bat` файл:

```bash
python ..\..\gui_repl.py --vfs-path ..\..\vfs\vfs_deep.xml --script ..\..\tests\stage3\startup_test.txt

```
